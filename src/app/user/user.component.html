<kui-progress-indicator *ngIf="loading"></kui-progress-indicator>
<app-error *ngIf="error"></app-error>

<div class="content large middle" *ngIf="!loading">
    <div class="content-sidebar user-data">
        <app-profile [username]="session.user.name" [loggedInUser]="true"></app-profile>
    </div>

    <div class="content-container">
        <nav mat-tab-nav-bar mat-align-tabs="left" class="tab-bar" animationDuration="0ms">
            <a mat-tab-link *ngFor="let link of navigation" [routerLink]="link.route" routerLinkActive="active-tab"
               #rla="routerLinkActive" [active]="rla.isActive">
                <mat-icon class="tab-icon">{{link.icon}}</mat-icon>
                {{link.label}}
            </a>
        </nav>

        <!-- main content: router outlet -->
        <div class="content large middle" [ngSwitch]="route" *ngIf="!loading && route">

            <!-- user profile -->
            <app-projects [username]="session.user.name" *ngSwitchCase="'profile'"></app-projects>

            <!-- edit user data -->
            <app-account [username]="session.user.name" *ngSwitchCase="'account'"></app-account>

            <!-- user's projects -->
            <app-projects class="full-width" [username]="session.user.name" *ngSwitchCase="'projects'"></app-projects>

            <!-- system's projects -->
            <!-- TODO: this should be available only, when the user has system admin rights -->
            <div *ngSwitchCase="'system'">
                <app-projects class="full-width" [username]="session.user.name" [system]="true" *ngIf="session.user.sysAdmin"></app-projects>
                <app-error *ngIf="!session.user.sysAdmin" [status]="403"></app-error>
            </div>

            <!-- user's collections (!!!NOT YET IMPLEMENTED!!!) -->
            <app-collection-list *ngSwitchCase="'collections'"></app-collection-list>

        </div>
    </div>



</div>
